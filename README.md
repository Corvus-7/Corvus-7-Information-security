__**Волчкова Дарья Алексеевна  УИБО-13-24**__ **Контрольная работа №2**
___________________________________________________________________________________________________________________________________________________________________________________________________
## <p align="center">Задание 1. SQL-injection и логин с административными правами

<img width="1920" height="1080" alt="изображение" src="https://github.com/user-attachments/assets/a4a21166-33e5-44d4-9c9b-bcd343fc34a0" />

<img width="1920" height="1080" alt="изображение" src="https://github.com/user-attachments/assets/75465617-8f92-4f87-a69f-313b28e9966f" />

<br>

## Ответы на вопросы

*    **Что такое SQL инъекция? SQL инъекция**

SQL-инъекция – одна из наиболее распространенных атак, используемых хакерами для атаки на веб-приложения, управляемых базой данных SQL. Это метод, при котором SQL-код/инструкции вставляются в поле выполнения с целью изменения содержимого базы данных, передачи полезного содержимого базы данных атакующему, возникновения проблем с отказом от использования, подделки идентификационных данных и многого другого
    
<br>
    
*    **Почему ввод строки ' or 1=1;-- позволил войти в аккаунт администратора?**

Эта атака работает благодаря изменению логики SQL-запроса. В уязвимом приложении запрос для проверки логина и пароля выглядит примерно так: `SELECT * FROM users WHERE username = '$username' AND password = '$password'`. При подстановке зловредной строки запрос превращается в: `SELECT * FROM users WHERE username = 'admin' or 1=1;-- ' AND password = '...'`. Здесь конструкция `or 1=1` делает условие всегда истинным, а двойной дефис `--` комментирует оставшуюся часть запроса, включая проверку пароля. В результате система возвращает первую запись из таблицы пользователей (обычно администратора), и приложение ошибочно предоставляет доступ.

<br>

*    **Как защитить web-ресурс от подобного рода атак?**

Основные меры защиты:
1. **Подготовленные выражения** — главный метод, при котором параметры запроса передаются отдельно от его структуры
2. **Экранирование пользовательского ввода** — преобразование специальных символов в безопасные последовательности
3. **Строгая валидация данных** — проверка формата и типа всех входных параметров
4. **Принцип минимальных привилегий** — ограничение прав учетной записи БД до необходимого минимума
5. **Регулярное обновление и патчинг** — своевременное исправление уязвимостей в используемых библиотеках
6. **Веб-файрвол (WAF)** — фильтрация и блокировка подозрительных запросов на уровне приложения


<br><br><br><br>


## <p align="center">Задание 2. Узнайте пароль администратора

<img width="1920" height="1080" alt="изображение" src="https://github.com/user-attachments/assets/3780a869-f251-4634-84de-ddcf34a104b0" />

<img width="1920" height="1080" alt="изображение" src="https://github.com/user-attachments/assets/28774b5f-3a36-4399-83c2-9d48cfdf7209" />

<br>

Исходя из анализа кода:
* status: success
* data:
    * id: 1,
    * username: ""
    * email: admin@juice-sh.op
    * password: 0192023a7bbd73250516f069df18b500
    * role: admin
    * deviceToken: ""
    * lastLoginIp: ""
    * profileImage: assets/public/images/uploads/defaultAdmin.png
    * topSecret: ""
    * isActive: true
    * createdAt: 2025-11-21 05:34:36.333 +00:00
    * updatedAt: 2025-11-21 05:34:36.333 +00:00
    * deletedAt: null
* iat: 1763705989

## Ответы на вопросы
* **Какой логин у администратора?** <pre>

Ответ: admin@juice-sh.op
<br>

* **Какой хэш пароля у администратора?**

Ответ: 0192023a7bbd73250516f069df18b500
<br>

* **Какой пароль администратора?**

Ответ: admin123
<br>

* **Что такое cookie?**

**Cookie** — это небольшой фрагмент данных, который сервер записывает в браузер пользователя и который автоматически отправляется обратно при каждом новом запросе к этому серверу. Основное назначение — идентификация пользователя и хранение его предпочтений
<br>

* **Какие меры могут быть использованы для устранения выявленной уязвимости**

**Выявленная уязвимость** — небезопасная прямая ссылка на объект (IDOR)

**Меры:**
    * Добавить проверку прав доступа к каждому запросу
    * Использовать случайные UUID вместо последовательных ID
    * Применять принцип минимальных привилегий
    * Валидировать входные параметры


<br>

<img width="1920" height="1080" alt="изображение" src="https://github.com/user-attachments/assets/36162ef8-10b9-4833-8e01-bfb03c601e0a" />


<img width="1920" height="1080" alt="image" src="https://github.com/user-attachments/assets/31387ebc-158d-4273-8043-3a558d52c7f7" />

<img width="1920" height="1080" alt="image" src="https://github.com/user-attachments/assets/c5cb6240-81c1-4a6d-8c06-a57888c5e8ae" />


<br><br><br><br>
## <p align="center">Задание 3. Чужая корзина
<img width="1861" height="998" alt="image" src="https://github.com/user-attachments/assets/5fb47568-5c5c-4422-8ec4-da5ea17b8b5f" />

* **Наименование параметра, который отвечает за открываемую корзину:** bid (Basket ID), хранящийся в Local Storage.

* **Рекомендации по исправлению уязвимости:**
  * Реализовать на сервере проверку прав доступа к корзине
  * Использовать непредсказуемые идентификаторы (UUID)
  * Не хранить bid в Local Storage — вместо этого привязывать корзину к сессии пользователя на сервере
  * Шифровать или подписывать bid, если его необходимо передавать клиенту


<br><br><br><br>
## <p align="center">Задание 4. XSS-инъекция

<img width="1858" height="978" alt="image" src="https://github.com/user-attachments/assets/3b0bca65-2101-4ae7-9ebc-ae3fe6715914" />






